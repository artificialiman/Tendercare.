<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Tendercare School</title>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/print.css">
  <style>
    .dashboard-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--spacing-xl) var(--spacing-md);
      animation: fadeIn 0.6s ease-out;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-lg);
      flex-wrap: wrap;
      gap: var(--spacing-md);
    }

    .breadcrumb {
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
      padding: var(--spacing-sm) var(--spacing-md);
      background: var(--glass-bg);
      backdrop-filter: blur(var(--blur-amount));
      -webkit-backdrop-filter: blur(var(--blur-amount));
      border-radius: var(--radius-full);
      border: 1px solid var(--glass-border);
      font-size: 14px;
    }

    .breadcrumb a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: var(--transition);
    }

    .breadcrumb a:hover {
      color: var(--text-primary);
    }

    .breadcrumb span {
      color: var(--text-light);
    }

    .profile-dropdown {
      position: relative;
    }

    .profile-avatar-small {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
    }

    .profile-avatar-small:hover {
      transform: scale(1.1);
    }

    .tabs-wrapper {
      display: flex;
      justify-content: center;
      margin-bottom: var(--spacing-lg);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.4s ease-out;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-xl);
    }

    .action-bar {
      position: sticky;
      bottom: var(--spacing-md);
      display: flex;
      gap: var(--spacing-sm);
      justify-content: center;
      padding: var(--spacing-md);
      background: var(--glass-bg);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-radius: var(--radius-md);
      border: 1px solid var(--glass-border);
      box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
      z-index: 50;
    }

    .btn-icon {
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }

    @media (max-width: 768px) {
      .dashboard-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .action-bar {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <nav class="glass-nav">
    <div class="nav-content">
      <div class="nav-left">
        <div class="school-crest"></div>
        <div class="nav-text">
          <h1>Tendercare School</h1>
          <p>Results Dashboard</p>
        </div>
      </div>
      <div class="profile-dropdown">
        <div class="profile-avatar-small" id="dashboardAvatar"></div>
      </div>
    </div>
  </nav>

  <button class="back-btn" onclick="location.href='index.html'">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  </button>

  <main class="dashboard-container">
    <div class="dashboard-header">
      <div class="breadcrumb">
        <a href="index.html">Yearbook</a>
        <span>›</span>
        <a href="profile.html">Profile</a>
        <span>›</span>
        <span style="color: var(--text-primary); font-weight: 600;">Dashboard</span>
      </div>
    </div>

    <div class="tabs-wrapper">
      <div class="tabs-container">
        <button class="tab-btn active" onclick="switchTab(0)">Transcript</button>
        <button class="tab-btn" onclick="switchTab(1)">Testimonial</button>
        <div class="tab-slider" id="mainTabSlider"></div>
      </div>
    </div>

    <div id="transcriptTab" class="tab-content active">
      <div class="stats-grid">
        <div class="glass-card stat-card">
          <div class="stat-value" id="jssGPA">3.45</div>
          <div class="stat-label">JSS CGPA</div>
          <svg class="progress-ring" width="120" height="120" style="margin: var(--spacing-md) auto; display: block;">
            <circle class="progress-ring-circle" stroke="url(#grad1)" stroke-width="8" fill="transparent" r="52" cx="60" cy="60" style="stroke-dasharray: 326.73; stroke-dashoffset: 100;"/>
            <defs>
              <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
        </div>

        <div class="glass-card stat-card">
          <div class="stat-value" id="ssGPA">3.82</div>
          <div class="stat-label">SS CGPA</div>
          <svg class="progress-ring" width="120" height="120" style="margin: var(--spacing-md) auto; display: block;">
            <circle class="progress-ring-circle" stroke="url(#grad2)" stroke-width="8" fill="transparent" r="52" cx="60" cy="60" style="stroke-dasharray: 326.73; stroke-dashoffset: 60;"/>
            <defs>
              <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
        </div>

        <div class="glass-card stat-card">
          <div class="stat-value" id="overallGPA">3.64</div>
          <div class="stat-label">Overall CGPA (6 Years)</div>
          <svg class="progress-ring" width="120" height="120" style="margin: var(--spacing-md) auto; display: block;">
            <circle class="progress-ring-circle" stroke="url(#grad3)" stroke-width="8" fill="transparent" r="52" cx="60" cy="60" style="stroke-dasharray: 326.73; stroke-dashoffset: 80;"/>
            <defs>
              <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#f6d365;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#fda085;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
        </div>
      </div>

      <div id="transcriptContent"></div>

      <div class="action-bar no-print">
        <button class="btn-primary btn-icon" onclick="window.print()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 6 2 18 2 18 9"></polyline>
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
            <rect x="6" y="14" width="12" height="8"></rect>
          </svg>
          Print Transcript
        </button>
        <button class="btn-secondary btn-icon" onclick="downloadPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download PDF
        </button>
      </div>
    </div>

    <div id="testimonialTab" class="tab-content">
      <div id="testimonialContent"></div>
      
      <div class="action-bar no-print">
        <button class="btn-primary btn-icon" onclick="window.print()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 6 2 18 2 18 9"></polyline>
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
            <rect x="6" y="14" width="12" height="8"></rect>
          </svg>
          Print Testimonial
        </button>
        <button class="btn-secondary btn-icon" onclick="downloadPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download PDF
        </button>
      </div>
    </div>
  </main>

  <script src="js/dashboard.js"></script>
  <script>
    const studentId = sessionStorage.getItem('signedInStudent');
    if (!studentId) {
      location.href = 'signin.html';
    }

    // Set avatar
    const initials = studentId ? studentId.substring(3, 5) : 'ST';
    document.getElementById('dashboardAvatar').textContent = initials;

    function switchTab(index) {
      const tabs = document.querySelectorAll('.tab-btn');
      const slider = document.getElementById('mainTabSlider');
      const contents = document.querySelectorAll('.tab-content');
      
      tabs.forEach((tab, i) => {
        tab.classList.toggle('active', i === index);
      });
      
      contents.forEach((content, i) => {
        content.classList.toggle('active', i === index);
      });
      
      const activeTab = tabs[index];
      slider.style.width = activeTab.offsetWidth + 'px';
      slider.style.left = activeTab.offsetLeft + 'px';
    }

    function downloadPDF() {
      alert('PDF download functionality would be implemented with a library like jsPDF in production.');
    }

    // Initialize tab slider
    window.addEventListener('load', () => {
      switchTab(0);
    });
  </script>
</body>
</html>